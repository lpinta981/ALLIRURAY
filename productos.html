<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nuestras Creaciones - Alli Ruray</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Poppins:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <!-- Preload imágenes del carrusel para evitar parpadeo inicial -->
    <link rel="preload" href="manta.png" as="image">
    <link rel="preload" href="manta 2.png" as="image">
    <link rel="preload" href="bufanda.png" as="image">
    <link rel="preload" href="bufanda 2.png" as="image">
    <link rel="preload" href="mochila.png" as="image">
    <link rel="preload" href="mochila 2.png" as="image">
        <link rel="preload" href="morral.png" as="image">
        <link rel="preload" href="morral 2.png" as="image">
        <link rel="preload" href="gorra.png" as="image">
        <link rel="preload" href="sombrero.png" as="image">
        <link rel="preload" href="alpargatas.png" as="image">
        <link rel="preload" href="botas.png" as="image">
        <style>
        /* --- MEJORA DE SELECTORES DE OPCIONES EN MÓVIL --- */
        @media (max-width: 767px) {
            select, .custom-select, .dropdown, .option-selector {
                width: 100%;
                padding: 14px 16px;
                font-size: 1.15rem;
                border-radius: 12px;
                border: 1.5px solid #8B4513;
                background: #fff8f2;
                color: #4B4453;
                margin-bottom: 1rem;
                box-shadow: 0 2px 8px rgba(139,69,19,0.07);
                appearance: none;
                -webkit-appearance: none;
                -moz-appearance: none;
                font-family: 'Poppins', 'Montserrat', sans-serif;
                transition: border 0.2s, box-shadow 0.2s;
            }
            select:focus, .custom-select:focus, .dropdown:focus, .option-selector:focus {
                border-color: #DAA520;
                box-shadow: 0 0 0 2px #DAA52033;
                outline: none;
            }
            /* Flecha personalizada para select */
            select {
                background-image: url('data:image/svg+xml;utf8,<svg fill="%238B4513" height="20" viewBox="0 0 20 20" width="20" xmlns="http://www.w3.org/2000/svg"><path d="M7.293 7.293a1 1 0 011.414 0L10 8.586l1.293-1.293a1 1 0 111.414 1.414l-2 2a1 1 0 01-1.414 0l-2-2a1 1 0 010-1.414z"/></svg>');
                background-repeat: no-repeat;
                background-position: right 1rem center;
                background-size: 1.2em;
                padding-right: 2.5em;
            }
        }
        body {
            font-family: 'Montserrat', sans-serif;
            color: #4B4453;
            background-color: #F7F5F2;
        }
        /* --- AJUSTES PARA TARJETAS DE PRODUCTOS --- */
        .productos-grid {
            display: grid;
            grid-template-columns: repeat(1, 1fr);
            gap: 1.5rem;
        }
        @media (min-width: 768px) {
            .productos-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
        @media (min-width: 1024px) {
            .productos-grid {
                grid-template-columns: repeat(3, 1fr);
            }
        }
        .product-card {
            display: flex;
            flex-direction: column;
            height: 100%;
            min-height: 22rem;
        }
        .product-body {
            flex: 1 1 auto;
            display: flex;
            flex-direction: column;
        }
        .product-desc {
            flex: 1 1 auto;
            display: flex;
            align-items: center;
        }
        .product-price {
            margin-top: auto;
            font-weight: 700;
            color: #8B4513;
            align-self: flex-end;
        }
        /* Forzar que las tarjetas ocupen toda la altura de la fila */
        .productos-grid > .product-card {
            height: 100%;
        }
        .header-bg {
            background-color: #795548;
            background-image: url('DASHBOARD.jpg');
            background-size: cover;
            background-position: center;
        }
        .header-text {
            font-family: 'Poppins', sans-serif;
        }
        /* Nuevo carrusel: fade + zoom con look ancestral */
        .carousel {
            position: relative;
            width: 100%;
            height: 100%;
            background-color: #f3efe9; /* tono cálido que evita flash blanco */
        }
        .carousel .slide {
            position: absolute;
            inset: 0;
            opacity: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: opacity 1s ease-in-out;
            background-color: #f3efe9; /* mismo color como placeholder hasta que cargue la imagen */
        }
        .carousel .slide img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            object-position: center;
            transition: transform 8s ease; /* lento para zoom sutil */
            will-change: transform;
        }
        /* animación crossfade con solapamiento más marcado para evitar flashes */
        @keyframes fadeInOut {
            0% { opacity: 0; }
            12% { opacity: 1; }
            50% { opacity: 1; }
            62% { opacity: 0; }
            100% { opacity: 0; }
        }
        /* Duración 10s para transiciones más suaves; los delays negativos hacen que
           siempre haya al menos una imagen visible al inicio. */
        .carousel .slide { animation: fadeInOut 10s infinite cubic-bezier(.22,.9,.32,1); animation-fill-mode: both; }
        .carousel .slide:nth-child(1) { animation-delay: 0s; }
        .carousel .slide:nth-child(2) { animation-delay: -5s; }

        /* Zoom sutil sincronizado con el fade, usando easing más suave */
        @keyframes slowZoom {
            0% { transform: scale(1); filter: saturate(1); }
            50% { transform: scale(1.06); filter: saturate(1.02); }
            100% { transform: scale(1); filter: saturate(1); }
        }
        .carousel .slide img { animation: slowZoom 10s infinite cubic-bezier(.22,.9,.32,1); animation-fill-mode: both; transition: transform 1s ease; }

        /* Forzar que los slides se solapen y eviten bordes duros */
        .carousel .slide { backface-visibility: hidden; }

        /* Badge ancestral */
        .badge-ancestral {
            position: absolute;
            left: 12px;
            top: 12px;
            background: rgba(139,69,19,0.9);
            color: #fff;
            padding: 6px 10px;
            border-radius: 999px;
            font-weight: 700;
            font-size: 0.8rem;
            box-shadow: 0 4px 14px rgba(0,0,0,0.25);
            z-index: 10;
        }
    /* Ensure header content aligns with main content when cart reserves right space */
    .header-inner { box-sizing: border-box; width:100%; position:relative; display:flex; align-items:center; }

    /* Floating button fixed to top-right (outside cart). Keeps clear of cart on desktop. */
    .content-float-btn { position:fixed; top:16px; right:calc(var(--cart-vw) + 24px); background:#8B4513; color:#fff; padding:8px 12px; border-radius:8px; box-shadow:0 6px 18px rgba(0,0,0,0.12); display:flex; align-items:center; gap:8px; z-index:120; text-decoration:none; }
    .content-float-btn:hover{ opacity:0.95; }

        /* Overlay de textura sutil (simula tejido/ancestral) */
        .textura-overlay {
            position: absolute;
            inset: 0;
            background-image: linear-gradient(135deg, rgba(255,255,255,0.02) 0%, rgba(0,0,0,0.04) 100%);
            mix-blend-mode: multiply;
            pointer-events: none;
            z-index: 5;
        }

        /* Hover: pequeño aumento para interacción */
        .carousel-wrap:hover img { transform: scale(1.04); }

        /* Asegurar altura y recorte agradable */
        .carousel-wrap { height: 100%; }
        .card-media { height: 8rem; /* corresponde a h-32 */ }
        @media (min-width: 768px) {
            .card-media { height: 12rem; /* md: mayor altura */ }
        }
    /* Layout para alinear precios y centrar descripciones */
    .product-card { display: flex; flex-direction: column; height: 100%; }
    .product-body { display: flex; flex-direction: column; flex: 1; }
    .product-header h3 { margin: 0 0 0.5rem 0; }
    .product-desc { flex: 1; display: flex; align-items: center; }
    .product-desc p { margin: 0; }
    .product-price { margin-top: auto; font-weight: 700; color: #8B4513; }
    /* Asegurar que las tarjetas ocupen toda la altura disponible en la grid */
    .grid > .product-card { min-height: 18rem; }
    /* Flip card styles */
    .flip-card { perspective: 1000px; }
    .flip-card-inner { position: relative; width: 100%; height: 100%; transition: transform 0.6s; transform-style: preserve-3d; }
    .flip-card:hover .flip-card-inner { transform: rotateY(180deg); }
    .flip-card-front, .flip-card-back { position: absolute; inset: 0; backface-visibility: hidden; }
    .flip-card-back { transform: rotateY(180deg); display:flex; align-items:center; justify-content:center; padding:1rem; background:#fff; }
    .flip-card-back .back-content { text-align:center; }
    .back-add-btn { background:#8B4513; color:#fff; padding:8px 12px; border-radius:6px; border:none; cursor:pointer; }

    /* Modal for large two-model view */
    .modal {
        position: fixed;
        top: 0;
        left: 0;
        width: 100vw;
        height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
        background: rgba(0,0,0,0.6);
        z-index: 60;
    }
    .modal .modal-body {
        width: calc(80vw - var(--cart-vw));
        max-width: calc(900px - var(--cart-vw));
        background: #fff;
        border-radius: 8px;
        box-shadow: 0 8px 32px rgba(0,0,0,0.18);
        margin: 0 auto 0 0;
    }
    @media (min-width: 768px) {
        .modal {
            justify-content: flex-start;
        }
        .modal .modal-body {
            margin-left: calc((100vw - var(--cart-vw) - (80vw - var(--cart-vw))) / 2);
        }
    }

    .modal.hidden { display:none; }

        .modal .modal-body { background:#fff; width:90%; max-width:1000px; height:80%; display:flex; gap:16px; padding:16px; border-radius:8px; }
        .modal .model { flex:1; display:flex; flex-direction:column; }
        .modal .model img { width:100%; height:60%; object-fit:cover; border-radius:6px; }
        .modal .model .meta { margin-top:8px; display:flex; justify-content:space-between; align-items:center; gap:8px; }

        /* En móvil, los modelos uno debajo del otro */
        @media (max-width: 767px) {
            .modal .modal-body { flex-direction: column; height: auto; gap: 0; }
            .modal .model { width: 100%; max-width: 100%; }
            .modal .model img { height: 38vw; min-height: 120px; max-height: 180px; }
            .modal .model .meta { flex-direction: column; align-items: stretch; gap: 8px; }
            .modal .model button { width: 100%; font-size: 1.08rem; padding: 12px 0; margin-top: 6px; }
        }

    /* Cart sidebar (desktop: reserve 20% of viewport; mobile handled below) */
    :root { --cart-vw: 20vw; --cart-min: 260px; --cart-max: 380px; --content-max:800px; }
    #cart-sidebar { position:fixed; right:0; top:0; height:100%; background:#fff; box-shadow:-6px 0 20px rgba(0,0,0,0.12); padding:16px; z-index:70; overflow:auto; width:var(--cart-vw); min-width:var(--cart-min); max-width:var(--cart-max); }
    #cart-sidebar h4{ margin-top:0; }
    /* cart toggle hidden by default; cart is fixed and always visible on desktop */
    #cart-toggle { display:none; }
    .cart-item { display:flex; gap:8px; margin-bottom:10px; align-items:center; }
    .cart-item img{ width:56px; height:56px; object-fit:cover; border-radius:6px; }
    .cart-item .remove{ background:transparent; color:#c0392b; border:none; cursor:pointer; }

    /* Main area: reserve right-hand space for cart and be scrollable within viewport (below header) */
    .main-area { box-sizing: border-box; }
    /* Header has h-32 (8rem). Main area height = viewport minus header. Main area will scroll internally. */
    .main-area { height: calc(100vh - 8rem); overflow:auto; }

    /* Responsive: move cart to bottom on small screens */
    @media (max-width: 767px) {
        #cart-sidebar {
            right:0; left:0; top:auto; bottom:0; width:100%;
            height: 140px;
            min-width:0; max-width:100%;
            box-shadow:0 -6px 20px rgba(0,0,0,0.12);
            border-top-left-radius: 18px;
            border-top-right-radius: 18px;
            transition: height 0.3s cubic-bezier(.4,1.4,.6,1), box-shadow 0.2s;
            overflow: hidden;
            z-index: 200;
        }
        #cart-sidebar.expanded {
            height: 80vh !important;
            min-height: 340px;
            box-shadow: 0 -12px 32px rgba(0,0,0,0.18);
        }
        #cart-mobile-handle {
            display: flex !important;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            width: 100%;
            height: 36px;
            cursor: pointer;
            background: #f7f5f2;
            border-top-left-radius: 18px;
            border-top-right-radius: 18px;
            z-index: 201;
            position: relative;
        }
        .cart-drag-bar {
            width: 44px;
            height: 6px;
            background: #bdbdbd;
            border-radius: 3px;
            margin: 6px auto 2px auto;
        }
        .cart-handle-label {
            font-size: 1.08rem;
            color: #8B4513;
            font-weight: 600;
            margin-bottom: 2px;
        }
        #cart-mobile-content {
            height: calc(100% - 36px);
            overflow-y: auto;
            background: #fff;
            border-top-left-radius: 18px;
            border-top-right-radius: 18px;
        }
        .cart-title-desktop { display: none; }
        .max-w-4xl { padding-bottom: 160px; }
        .cart-item img{ width:48px; height:48px; }
        .content-float-btn { position:fixed; top:12px; right:16px; }
        .main-area { height: auto; }
    }

    
    /* Desktop: reserve space on the right for the cart so content is not covered */
    @media (min-width:768px) {
        /* Reserve right padding in the main area so content never sits under the fixed cart */
        .main-area { padding-right: calc(var(--cart-vw) + 32px); }
        /* Ensure the centered container sizes itself within the padded main area and doesn't exceed available space */
        .max-w-4xl { margin: 0 auto; width: 100%; box-sizing: border-box; max-width: min(var(--content-max), calc(100vw - var(--cart-vw) - 64px)); position:relative; }
        /* Move header content left by same padding so its center aligns with main content */
        .header-inner { padding-right: calc(var(--cart-vw) + 32px); }
        /* ensure cart is always visible and fixed on desktop */
        #cart-sidebar { display:block; }
    }

        /* Botón menú principal móvil: fijo abajo derecha, solo visible en móvil */
    .content-float-btn-mobile {
        position: fixed;
        right: 18px;
        bottom: 170px; /* suficiente para estar sobre el carrito móvil */
        background: #8B4513;
        color: #fff;
        padding: 16px 18px;
        border-radius: 50%;
        box-shadow: 0 6px 18px rgba(0,0,0,0.18);
        z-index: 250;
        display: none;
        font-size: 1.6rem;
        align-items: center;
        justify-content: center;
        transition: background 0.2s;
    }
    .content-float-btn-mobile:hover {
        background: #a05c2a;
    }
    @media (max-width: 767px) {
        .content-float-btn-mobile { display: flex !important; }
        .content-float-btn { display: none !important; }
    }

    </style>
<script>
// Drawer móvil para carrito
function setupCartDrawerMobile() {
    const sidebar = document.getElementById('cart-sidebar');
    const handle = document.getElementById('cart-mobile-handle');
    const content = document.getElementById('cart-mobile-content');
    if (!sidebar || !handle || !content) return;
    let expanded = false;
    function setExpanded(state) {
        expanded = state;
        if (expanded) {
            sidebar.classList.add('expanded');
        } else {
            sidebar.classList.remove('expanded');
        }
    }
    handle.onclick = () => setExpanded(!expanded);
    // Cerrar al hacer swipe down (táctil)
    let startY = null;
    handle.addEventListener('touchstart', e => { startY = e.touches[0].clientY; });
    handle.addEventListener('touchend', e => {
        if (startY !== null) {
            const endY = e.changedTouches[0].clientY;
            if (endY - startY > 40) setExpanded(false); // swipe down
            if (startY - endY > 40) setExpanded(true); // swipe up
        }
        startY = null;
    });
    // Por defecto contraído
    setExpanded(false);
}
if (window.innerWidth <= 767) {
    document.addEventListener('DOMContentLoaded', setupCartDrawerMobile);
}
</script>

</head>
<body class="bg-[#F7F5F2]">

    <!-- Botón flotante para menú principal (se inserta dentro del header-inner) -->

    

    <!-- Encabezado -->
    <div class="relative w-full h-32 header-bg bg-brown-700">
        <div class="absolute inset-0 bg-black opacity-30"></div>
        <div class="relative z-10 flex items-center h-full">
            <div class="header-inner">
                <div class="max-w-4xl mx-auto p-4 text-center flex flex-col justify-center">
                    <a href="dashboard.html" class="content-float-btn" title="Menú principal">
                        <i class="fas fa-home"></i>
                        <span>Menú principal</span>
                    </a>
                    <a href="dashboard.html" class="content-float-btn-mobile" title="Menú principal" style="display:none;">
                        <i class="fas fa-home"></i>
                    </a>


                    <div class="relative z-10 text-white p-6 rounded-lg bg-black bg-opacity-40">
                        <h1 class="text-2xl md:text-4xl font-bold header-text">Nuestras Creaciones</h1>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Contenido -->
    <div class="main-area">
    <div class="max-w-4xl mx-auto p-8">
        <h2 class="text-3xl font-bold text-[#4B4453] mb-6">Productos Artesanales de Alli Ruray</h2>
        <p class="text-lg mb-6">
            Cada creación de Alli Ruray es un homenaje a la naturaleza y la cultura andina. Hechos a mano con fibras naturales y tintes ecológicos, nuestros productos combinan la tradición ancestral con diseños únicos inspirados en los volcanes y paisajes de Ecuador.
        </p>

    <div class="productos-grid">
            <div class="bg-white rounded-lg shadow-md p-4 product-card">
                <div class="relative w-full h-32 mb-4 overflow-hidden rounded-lg card-media carousel-wrap">
                    <span class="badge-ancestral" style="top:10px;left:10px;background:#c0392b;z-index:20;">¡Pocas unidades!</span>
                    <div class="carousel" aria-hidden="false">
                        <div class="slide">
                            <img src="manta.png" alt="Manta 1">
                            <div class="textura-overlay"></div>
                        </div>
                        <div class="slide">
                            <img src="manta 2.png" alt="Manta 2">
                            <div class="textura-overlay"></div>
                        </div>
                    </div>
                </div>
                <div class="product-body">
                    <div class="product-header"><h3 class="text-xl font-bold text-[#4B4453] mb-2">Mantas Tejidas</h3></div>
                    <div class="product-desc"><p class="text-sm mb-4">Representaciones realistas de volcanes locales, tamaño 1.5×2 m, 100% lana con bordados ancestrales.</p></div>
                </div>
                <div style="display: flex; flex-direction: column; align-items: flex-end; gap: 0.5rem; margin-top: auto;">
                    <p class="text-lg product-price" style="margin: 0;">Precio: USD 150</p>
                    <button class="back-add-btn add-cart-btn">Añadir al carrito</button>
                </div>
            </div>
            <div class="bg-white rounded-lg shadow-md p-4 product-card">
                <div class="relative w-full h-32 mb-4 overflow-hidden rounded-lg card-media carousel-wrap">
                    <div class="carousel" aria-hidden="false">
                        <div class="slide">
                            <img src="bufanda.png" alt="Bufanda 1">
                            <div class="textura-overlay"></div>
                        </div>
                        <div class="slide">
                            <img src="bufanda 2.png" alt="Bufanda 2">
                            <div class="textura-overlay"></div>
                        </div>
                    </div>
                </div>
                <div class="product-body">
                    <div class="product-header"><h3 class="text-xl font-bold text-[#4B4453] mb-2">Bufandas</h3></div>
                    <div class="product-desc"><p class="text-sm mb-4">Diseños geométricos andinos inspirados en chakanas, largo 1.8 m, mezcla de lana y algodón.</p></div>
                </div>
                <div style="display: flex; flex-direction: column; align-items: flex-end; gap: 0.5rem; margin-top: auto;">
                    <p class="text-lg product-price" style="margin: 0;">Precio: USD 50</p>
                    <button class="back-add-btn add-cart-btn">Añadir al carrito</button>
                </div>
            </div>
            <div class="bg-white rounded-lg shadow-md p-4 product-card">
                <div class="relative w-full h-32 mb-4 overflow-hidden rounded-lg card-media carousel-wrap">
                    <span class="badge-ancestral" style="top:10px;left:10px;background:#c0392b;z-index:20;">¡Pocas unidades!</span>
                    <div class="carousel" aria-hidden="false">
                        <div class="slide">
                            <img src="mochila.png" alt="Mochila 1">
                            <div class="textura-overlay"></div>
                        </div>
                        <div class="slide">
                            <img src="mochila 2.png" alt="Mochila 2">
                            <div class="textura-overlay"></div>
                        </div>
                    </div>
                </div>
                <div class="product-body">
                    <div class="product-header"><h3 class="text-xl font-bold text-[#4B4453] mb-2">Mochilas</h3></div>
                    <div class="product-desc"><p class="text-sm mb-4">Mochilas con cuero de alta calidad, bolsillos funcionales y patrones inspirados en aves y flores locales.</p></div>
                </div>
                <div style="display: flex; flex-direction: column; align-items: flex-end; gap: 0.5rem; margin-top: auto;">
                    <p class="text-lg product-price" style="margin: 0;">Precio: USD 80</p>
                    <button class="back-add-btn add-cart-btn">Añadir al carrito</button>
                </div>
            </div>
            <div class="bg-white rounded-lg shadow-md p-4 product-card">
                <div class="relative w-full h-32 mb-4 overflow-hidden rounded-lg card-media carousel-wrap">
                    <div class="carousel" aria-hidden="false">
                        <div class="slide">
                            <img src="morral.png" alt="Morral 1">
                            <div class="textura-overlay"></div>
                        </div>
                        <div class="slide">
                            <img src="morral 2.png" alt="Morral 2">
                            <div class="textura-overlay"></div>
                        </div>
                    </div>
                </div>
                <div class="product-body">
                    <div class="product-header"><h3 class="text-xl font-bold text-[#4B4453] mb-2">Morrales</h3></div>
                    <div class="product-desc"><p class="text-sm mb-4">Diseños prácticos y elegantes para uso diario, tejidos con fibras naturales.</p></div>
                </div>
                <div style="display: flex; flex-direction: column; align-items: flex-end; gap: 0.5rem; margin-top: auto;">
                    <p class="text-lg product-price" style="margin: 0;">Precio: USD 60</p>
                    <button class="back-add-btn add-cart-btn">Añadir al carrito</button>
                </div>
            </div>
            <div class="bg-white rounded-lg shadow-md p-4 product-card">
                <div class="relative w-full h-32 mb-4 overflow-hidden rounded-lg card-media carousel-wrap">
                    <div class="carousel" aria-hidden="false">
                        <div class="slide">
                            <img src="gorra.png" alt="Gorra tradicional">
                            <div class="textura-overlay"></div>
                        </div>
                        <div class="slide">
                            <img src="sombrero.png" alt="Sombrero artesanal">
                            <div class="textura-overlay"></div>
                        </div>
                    </div>
                </div>
                <div class="product-body">
                    <div class="product-header"><h3 class="text-xl font-bold text-[#4B4453] mb-2">Gorras y Sombreros</h3></div>
                    <div class="product-desc"><p class="text-sm mb-4">Estilos tradicionales y modernos con bordados ancestrales y ajuste cómodo.</p></div>
                </div>
                <div style="display: flex; flex-direction: column; align-items: flex-end; gap: 0.5rem; margin-top: auto;">
                    <p class="text-lg product-price" style="margin: 0;">Precio: USD 30 - USD 80</p>
                    <button class="back-add-btn add-cart-btn">Añadir al carrito</button>
                </div>
            </div>
            <div class="bg-white rounded-lg shadow-md p-4 product-card">
                <div class="relative w-full h-32 mb-4 overflow-hidden rounded-lg card-media carousel-wrap">
                    <span class="badge-ancestral" style="top:10px;left:10px;background:#c0392b;z-index:20;">¡Pocas unidades!</span>
                    <div class="carousel" aria-hidden="false">
                        <div class="slide">
                            <img src="alpargatas.png" alt="Alpargatas tejidas">
                            <div class="textura-overlay"></div>
                        </div>
                        <div class="slide">
                            <img src="botas.png" alt="Botas artesanales">
                            <div class="textura-overlay"></div>
                        </div>
                    </div>
                </div>
                <div class="product-body">
                    <div class="product-header"><h3 class="text-xl font-bold text-[#4B4453] mb-2">Alpargatas y Botas</h3></div>
                    <div class="product-desc"><p class="text-sm mb-4">Calzado cómodo con suelas naturales de yute y diseños coloridos. Botas de cuero genuino y diseños únicos</p></div>
                </div>
                <div style="display: flex; flex-direction: column; align-items: flex-end; gap: 0.5rem; margin-top: auto;">
                    <p class="text-lg product-price" style="margin: 0;">Precio: USD 40 - USD 110 </p>
                    <button class="back-add-btn add-cart-btn">Añadir al carrito</button>
                </div>
            </div>
        </div>

        <p class="text-lg mt-6">
            Todos nuestros productos son elaborados con técnicas artesanales tradicionales, priorizando la calidad y la sostenibilidad. Cada pieza lleva consigo la promesa de "el buen hacer" andino.
        </p>
    </div>
    </div>

    <!-- Modal: two-model view -->
    <div id="model-modal" class="modal hidden" aria-hidden="true">
        <div class="modal-body">
            <div class="model" id="model-left">
                <img src="" alt="Model 1">
                <div class="meta"><strong id="model-left-name"></strong><button class="back-add-btn" id="model-left-add">Añadir al carrito</button></div>
            </div>
            <div class="model" id="model-right">
                <img src="" alt="Model 2">
                <div class="meta"><strong id="model-right-name"></strong><button class="back-add-btn" id="model-right-add">Añadir al carrito</button></div>
            </div>
        </div>
    </div>

    <!-- cart toggle removed: cart is fixed and visible on desktop, bottom on mobile -->
        <aside id="cart-sidebar" aria-hidden="true">
            <div id="cart-mobile-handle" style="display:none;" class="cart-mobile-handle">
                <div class="cart-drag-bar"></div>
                <span class="cart-handle-label">Carrito</span>
            </div>
            <div id="cart-mobile-content">
                <h4 class="cart-title-desktop">Carrito</h4>
                <div id="cart-items"></div>
                <hr>
                <div style="display:flex;justify-content:space-between;align-items:center"><strong>Total:</strong><strong id="cart-total">USD 0</strong></div>
                <div id="cart-whatsapp-btn-container"></div>
            </div>
        </aside>

    <script>
        // Simple cart state
        let cart = [];
        // Cargar carrito desde localStorage si existe
        if (localStorage.getItem('cart')) {
            try {
                cart = JSON.parse(localStorage.getItem('cart')) || [];
            } catch(e) { cart = []; }
        }
        function ensureCartVisibleMobile(){
            if(window.innerWidth <= 767){
                const side = document.getElementById('cart-sidebar');
                side.scrollIntoView({behavior:'smooth', block:'end'});
            }
        }

        function renderCart() {
            // Guardar carrito en localStorage
            localStorage.setItem('cart', JSON.stringify(cart));
            const container = document.getElementById('cart-items');
            container.innerHTML = '';
            let total = 0;
            let descuentoActivo = false;
            let descuentoRestante = 0;
            let descuentoTimer = null;
            let descuentoKey = 'descuentoTimer';
            let descuentoStart = null;
            // Descuento: si total > 150, activar 10% por 8 minutos
            if (cart.length > 0) {
                cart.forEach((it, idx) => {
                    const price = parseFloat(it.price || 0);
                    total += isNaN(price)?0:price;
                });
                if (total > 149) {
                    // Si ya hay descuento en localStorage y no ha expirado, usarlo
                    const now = Date.now();
                    let start = parseInt(localStorage.getItem(descuentoKey) || '0', 10);
                    if (!start || now - start > 8*60*1000) {
                        // Nuevo descuento
                        start = now;
                        localStorage.setItem(descuentoKey, start.toString());
                    }
                    descuentoStart = start;
                    descuentoRestante = 8*60*1000 - (now - start);
                    if (descuentoRestante > 0) {
                        descuentoActivo = true;
                        total = total * 0.9;
                    } else {
                        descuentoActivo = false;
                        localStorage.removeItem(descuentoKey);
                    }
                } else {
                    // Si baja de 150, eliminar descuento
                    localStorage.removeItem(descuentoKey);
                }
            }

            if (cart.length === 0) {
                // Mensajes motivadores
                const messages = [
                    '¡Tu carrito está esperando ser llenado de magia artesanal!',
                    '¿Aún no te decides? ¡Descubre algo único hoy!',
                    'Haz tuyo un pedacito de tradición. ¡Agrega algo al carrito!',
                    '¡No te vayas con las manos vacías! Inspírate y elige tu favorito.',
                    'Cada producto cuenta una historia. ¿Cuál será la tuya?',
                    '¡Regálate o regala arte hecho a mano!',
                    'Tu próxima compra especial está a un clic.',
                    '¡Haz que tu carrito cobre vida con nuestras creaciones!',
                    '¿Buscas algo auténtico? ¡Agrégalo al carrito!',
                    'Elige calidad, elige tradición. ¡Empieza tu compra!'
                ];
                if (!window.cartMessageInterval) window.cartMessageInterval = null;
                let msgIdx = Math.floor(Math.random() * messages.length);
                const msgDiv = document.createElement('div');
                msgDiv.id = 'cart-empty-message';
                msgDiv.style.cssText = 'padding: 24px 8px; text-align: center; color: #8B4513; font-size: 1.1rem; font-family: Poppins, Montserrat, sans-serif; min-height: 60px; transition: opacity 0.5s;';
                msgDiv.textContent = messages[msgIdx];
                container.appendChild(msgDiv);
                if (window.cartMessageInterval) clearInterval(window.cartMessageInterval);
                window.cartMessageInterval = setInterval(() => {
                    msgIdx = (msgIdx + 1) % messages.length;
                    msgDiv.style.opacity = 0;
                    setTimeout(() => {
                        msgDiv.textContent = messages[msgIdx];
                        msgDiv.style.opacity = 1;
                    }, 500);
                }, 5000);
            } else {
                if (window.cartMessageInterval) {
                    clearInterval(window.cartMessageInterval);
                    window.cartMessageInterval = null;
                }
                cart.forEach((it, idx) => {
                    const div = document.createElement('div');
                    div.className = 'cart-item';
                    let priceHtml = it.priceText;
                    if (descuentoActivo) {
                        // Extraer solo el número del precio
                        const priceNum = parseFloat(it.price || 0);
                        if (!isNaN(priceNum) && priceNum > 0) {
                            const priceDesc = (priceNum * 0.9).toFixed(2);
                            priceHtml = `<span style='text-decoration:line-through;color:#b05c0b;font-size:0.98em;margin-right:6px;'>USD ${priceNum.toFixed(2)}</span> <span style='color:#218838;font-weight:600;'>USD ${priceDesc}</span>`;
                        }
                    }
                    div.innerHTML = `<img src="${it.img}" alt="${it.name}"><div style="flex:1"><div>${it.name}</div><div>${priceHtml}</div></div><button class="remove" data-idx="${idx}">✕</button>`;
                    container.appendChild(div);
                });
                container.querySelectorAll('.remove').forEach(btn => btn.addEventListener('click', e => {
                    const i = Number(e.currentTarget.dataset.idx);
                    cart.splice(i,1);
                    renderCart();
                }));
                // Descuento visual y temporizador
                if (descuentoActivo) {
                    let timerDiv = document.getElementById('cart-descuento-timer');
                    if (!timerDiv) {
                        timerDiv = document.createElement('div');
                        timerDiv.id = 'cart-descuento-timer';
                        timerDiv.style.cssText = 'margin:18px 0 0 0;padding:14px 8px;background:#ffe7b2;border-radius:8px;color:#b05c0b;text-align:center;font-size:1.1rem;font-family:Poppins,Montserrat,sans-serif;font-weight:600;';
                        container.appendChild(timerDiv);
                    } else {
                        timerDiv.innerHTML = '';
                    }
                    function updateTimer() {
                        let ms = descuentoRestante;
                        if (ms < 0) ms = 0;
                        const min = Math.floor(ms/60000);
                        const seg = Math.floor((ms%60000)/1000);
                        timerDiv.innerHTML = `¡<b>10% de descuento</b> por tiempo limitado!<br>Te quedan <b>${min}:${seg.toString().padStart(2,'0')}</b> minutos para aprovecharlo.`;
                    }
                    updateTimer();
                    if (window.descuentoInterval) clearInterval(window.descuentoInterval);
                    window.descuentoInterval = setInterval(() => {
                        descuentoRestante = 8*60*1000 - (Date.now() - descuentoStart);
                        if (descuentoRestante > 0) {
                            updateTimer();
                        } else {
                            clearInterval(window.descuentoInterval);
                            window.descuentoInterval = null;
                            renderCart();
                        }
                    }, 1000);
                } else {
                    if (window.descuentoInterval) {
                        clearInterval(window.descuentoInterval);
                        window.descuentoInterval = null;
                    }
                    // Mostrar mensaje motivador si total entre 100 y 150
                    if (total >= 100 && total < 150) {
                        const faltaDesc = (150 - total).toFixed(2);
                        const descDiv = document.createElement('div');
                        descDiv.id = 'cart-descuento-message';
                        descDiv.style.cssText = 'margin:18px 0 0 0;padding:14px 8px;background:#e3f7f1;border-radius:8px;color:#0b7a75;text-align:center;font-size:1.05rem;font-family:Poppins,Montserrat,sans-serif;';
                        descDiv.innerHTML = `¡Solo te falta <b>USD ${faltaDesc}</b> para aplicar a un <b>10% de descuento</b> por tiempo limitado!`;
                        container.appendChild(descDiv);
                    }
                }
                // Mensaje de envío gratuito si el total es menor a 100 (después de descuento)
                if (total > 0 && total < 100) {
                    const falta = (100 - total).toFixed(2);
                    const envioDiv = document.createElement('div');
                    envioDiv.id = 'cart-envio-message';
                    envioDiv.style.cssText = 'margin: 18px 0 0 0; padding: 14px 8px; background: #f7f1e3; border-radius: 8px; color: #b05c0b; text-align: center; font-size: 1rem; font-family: Poppins, Montserrat, sans-serif;';
                    envioDiv.innerHTML = `¡Solo te falta <b>USD ${falta}</b> para obtener <b>envío gratuito</b>!<br> <span style='font-size:0.97em'>Anímate a escoger un producto más y llévate la experiencia completa.</span>`;
                    container.appendChild(envioDiv);
                }
            }
            const cartTotalEl = document.getElementById('cart-total');
            if (descuentoActivo) {
                // Calcular total original
                let totalOriginal = 0;
                cart.forEach(it => {
                    const price = parseFloat(it.price || 0);
                    totalOriginal += isNaN(price)?0:price;
                });
                cartTotalEl.innerHTML = `<span style='text-decoration:line-through;color:#b05c0b;font-size:1em;margin-right:8px;'>USD ${totalOriginal.toFixed(2)}</span> <span style='color:#218838;font-weight:700;'>USD ${total.toFixed(2)}</span> <span style='font-size:0.95em;'>(con 10% desc.)</span>`;
            } else {
                cartTotalEl.textContent = 'USD ' + total.toFixed(2);
            }

            // Botón WhatsApp
            const waContainer = document.getElementById('cart-whatsapp-btn-container');
            waContainer.innerHTML = '';
            if (cart.length > 0) {
                const waBtn = document.createElement('a');
                waBtn.id = 'cart-whatsapp-btn';
                waBtn.target = '_blank';
                waBtn.rel = 'noopener';
                waBtn.style.cssText = 'display:block;margin:18px auto 0 auto;padding:14px 0;width:100%;max-width:340px;background:#25d366;color:#fff;font-weight:700;font-size:1.1rem;text-align:center;border-radius:8px;box-shadow:0 2px 8px rgba(0,0,0,0.08);text-decoration:none;transition:background 0.2s;letter-spacing:0.5px;';
                waBtn.onmouseover = () => waBtn.style.background = '#1ebe57';
                waBtn.onmouseout = () => waBtn.style.background = '#25d366';
                // Texto del botón
                waBtn.textContent = (total >= 100) ? 'PEDIR AHORA CON ENVÍO GRATUITO' : 'PEDIR AHORA';
                // Mensaje para WhatsApp
                let msg = '¡Hola! Quiero hacer este pedido:%0A';
                cart.forEach((it, idx) => {
                    msg += `• ${it.name} (${it.priceText})%0A`;
                });
                msg += `%0ATotal: USD ${total.toFixed(2)}`;
                if (descuentoActivo) {
                    msg += '%0A¡Aproveché el 10% de descuento por tiempo limitado!';
                }
                if (total >= 100) {
                    msg += '%0A¡Aplico a envío gratuito!';
                } else {
                    const falta = (100 - total).toFixed(2);
                    msg += `%0A¡Solo me faltan USD ${falta} para envío gratis!`;
                }
                // Cambia el número de WhatsApp aquí:
                const numero = '593962248046'; // <-- PON AQUÍ TU NÚMERO
                waBtn.href = `https://wa.me/${numero}?text=${msg}`;
                waBtn.innerHTML = `<i class='fab fa-whatsapp' style='margin-right:8px'></i>` + waBtn.textContent;
                waContainer.appendChild(waBtn);
            }
        }

        const cartSidebar = document.getElementById('cart-sidebar');
        function updateCartVisibilityByWidth(){
            const mobile = window.innerWidth <= 767;
            if(mobile){
                // mobile: bottom bar (CSS handles positioning)
                cartSidebar.style.display = 'block';
                cartSidebar.setAttribute('aria-hidden','false');
            } else {
                // desktop: always visible fixed sidebar on the right
                cartSidebar.style.display = 'block';
                cartSidebar.setAttribute('aria-hidden','false');
            }
        }
        window.addEventListener('resize', updateCartVisibilityByWidth);
        updateCartVisibilityByWidth();

        // Wire up flip back buttons: add to cart from back of card
        document.querySelectorAll('.product-card').forEach(card => {
            // collect data for modal: name, price
            const name = card.querySelector('.product-header h3').textContent.trim();
            const priceText = (card.querySelector('.product-price')||{}).textContent || '';
            const price = (priceText.match(/USD\s*([0-9\.\-]+)/)||[])[1] || 0;
            const img = card.querySelector('.carousel img')?.getAttribute('src') || '';
            // flip back button (si existe)
            const backBtn = card.querySelector('.flip-card-back .back-add-btn');
            if(backBtn) backBtn.addEventListener('click', ()=>{
                cart.push({name, price, img, priceText}); renderCart(); ensureCartVisibleMobile();
            });
            // botón visible abajo
            const addBtn = card.querySelector('.add-cart-btn');
            if(addBtn) addBtn.addEventListener('click', ()=>{
                // Mostrar modal de modelos para escoger
                const imgs = Array.from(card.querySelectorAll('.carousel img')).map(i=>i.src);
                // Singularizar nombre si termina en 's' y no es Gorras ni Alpargatas
                function singularize(n) {
                    if ((n.endsWith('s') || n.endsWith('S')) && !n.toLowerCase().includes('gorras') && !n.toLowerCase().includes('alpargatas')) {
                        return n.slice(0, -1);
                    }
                    return n;
                }
                let leftName = singularize(name) + ' - Modelo 1';
                let rightName = singularize(name) + ' - Modelo 2';
                let leftPrice = priceText;
                let rightPrice = priceText;
                // Personalización para Gorras/Sombreros y Alpargatas/Botas
                if (name.includes('Gorras') || name.includes('Sombreros')) {
                    leftName = 'Gorra tradicional';
                    rightName = 'Sombrero artesanal';
                    leftPrice = 'Precio: USD 30';
                    rightPrice = 'Precio: USD 80';
                } else if (name.includes('Alpargatas') || name.includes('Botas')) {
                    leftName = 'Alpargatas tejidas';
                    rightName = 'Botas artesanales';
                    leftPrice = 'Precio: USD 40';
                    rightPrice = 'Precio: USD 110';
                }
                document.getElementById('model-left').querySelector('img').src = imgs[0]||img;
                document.getElementById('model-right').querySelector('img').src = imgs[1]||img;
                document.getElementById('model-left-name').textContent = leftName;
                document.getElementById('model-right-name').textContent = rightName;
                document.getElementById('model-left-add').textContent = leftPrice + ' | Añadir al carrito';
                document.getElementById('model-right-add').textContent = rightPrice + ' | Añadir al carrito';
                document.getElementById('model-left-add').onclick = ()=>{ cart.push({name: leftName, price: leftPrice.replace(/[^\d.\-]/g,''), img: imgs[0]||img, priceText: leftPrice}); renderCart(); ensureCartVisibleMobile(); document.getElementById('model-modal').classList.add('hidden'); document.getElementById('model-modal').setAttribute('aria-hidden','true'); };
                document.getElementById('model-right-add').onclick = ()=>{ cart.push({name: rightName, price: rightPrice.replace(/[^\d.\-]/g,''), img: imgs[1]||img, priceText: rightPrice}); renderCart(); ensureCartVisibleMobile(); document.getElementById('model-modal').classList.add('hidden'); document.getElementById('model-modal').setAttribute('aria-hidden','true'); };
                document.getElementById('model-modal').classList.remove('hidden');
                document.getElementById('model-modal').setAttribute('aria-hidden','false');
            });
            // flip back ver modelos
            const modelBtn = card.querySelector('.flip-card-back [data-model]');
            if(modelBtn) modelBtn.addEventListener('click', ()=>{
                const imgs = Array.from(card.querySelectorAll('.carousel img')).map(i=>i.src);
                document.getElementById('model-left').querySelector('img').src = imgs[0]||img;
                document.getElementById('model-right').querySelector('img').src = imgs[1]||img;
                document.getElementById('model-left-name').textContent = name + ' - Modelo 1';
                document.getElementById('model-right-name').textContent = name + ' - Modelo 2';
                document.getElementById('model-left-add').onclick = ()=>{ cart.push({name: name+' - Modelo 1', price: price, img: imgs[0]||img, priceText}); renderCart(); ensureCartVisibleMobile(); };
                document.getElementById('model-right-add').onclick = ()=>{ cart.push({name: name+' - Modelo 2', price: price, img: imgs[1]||img, priceText}); renderCart(); ensureCartVisibleMobile(); };
                document.getElementById('model-modal').classList.remove('hidden');
                document.getElementById('model-modal').setAttribute('aria-hidden','false');
            });
        });

        // close modal on click outside
        document.getElementById('model-modal').addEventListener('click', (e)=>{
            if(e.target.id === 'model-modal'){
                document.getElementById('model-modal').classList.add('hidden');
                document.getElementById('model-modal').setAttribute('aria-hidden','true');
            }
        });

        // initial render
        renderCart();

        // Ajuste dinámico: asegurar que .main-area solo ocupe el alto restante
        function adjustMainAreaHeight(){
            const header = document.querySelector('.header-bg');
            const main = document.querySelector('.main-area');
            if(!header || !main) return;
            const mobile = window.innerWidth <= 767;
            if(mobile){
                main.style.height = 'auto';
                return;
            }
            const h = Math.ceil(header.getBoundingClientRect().height);
            main.style.height = `calc(100vh - ${h}px)`;
        }
        window.addEventListener('resize', adjustMainAreaHeight);
        window.addEventListener('load', adjustMainAreaHeight);
        // also run once now in case DOM already loaded
        adjustMainAreaHeight();
    </script>

    <script>
        // Mantener el botón flotante verticalmente centrado respecto al header
        function positionFloatButtonVertically(){
            const btn = document.querySelector('.content-float-btn');
            const header = document.querySelector('.header-bg');
            if(!btn || !header) return;
            const hdrRect = header.getBoundingClientRect();
            // calcular el centro vertical del header en relación al viewport
            const hdrCenterY = hdrRect.top + hdrRect.height/2;
            // obtener la altura del botón
            const btnHeight = btn.getBoundingClientRect().height;
            // queremos que el centro del botón coincida con hdrCenterY -> top = center - btnHeight/2
            const top = Math.max(8, Math.round(hdrCenterY - btnHeight/2));
            // si el header se extiende fuera del viewport (scroll) mantenemos el botón dentro
            btn.style.top = top + 'px';
        }

        window.addEventListener('load', ()=>{
            positionFloatButtonVertically();
            // re-apply after a slight delay in case fonts/images change layout
            setTimeout(positionFloatButtonVertically, 250);
        });
        window.addEventListener('resize', ()=>{
            positionFloatButtonVertically();
        });
        // reposition when header height might change (e.g., cart toggles)
        const ro = new ResizeObserver(()=> positionFloatButtonVertically());
        const headerEl = document.querySelector('.header-bg');
        if(headerEl) ro.observe(headerEl);
    </script>

</body>
</html>